import{r as nt,K as bt,L as $t,a1 as R,d as Xt,o as Yt,c as Lt,a as Tt,w as Pt,v as At,I as Et,J as Rt,C as ot,_ as St}from"./index.e7c5e7f8.js";const Ct="/assets/zhilang.e7758333.jpg";function V(){return V=Object.assign||function(u){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(u[n]=a[n])}return u},V.apply(this,arguments)}var P=function(o,a){return o.querySelector(a)},It=function(o,a){return o.querySelectorAll(a)},Bt=function(o){o===void 0&&(o={});var a={};return Object.keys(o).forEach(function(n){typeof o[n]<"u"&&(a[n]=o[n])}),a};function Nt(u){u===void 0&&(u={});var o=u,a=o.el,n=o.eventsEl,f={__atropos__:!0,params:V({alwaysActive:!1,activeOffset:50,shadowOffset:50,shadowScale:1,duration:300,rotate:!0,rotateTouch:!0,rotateXMax:15,rotateYMax:15,rotateXInvert:!1,rotateYInvert:!1,stretchX:0,stretchY:0,stretchZ:0,commonOrigin:!0,shadow:!0,highlight:!0,onEnter:null,onLeave:null,onRotate:null},Bt(u||{})),destroyed:!1,isActive:!1},t=f.params,y,_,N,M,x,l,i,v,b,J,O=[],K,rt=function s(){K=requestAnimationFrame(function(){O.forEach(function(e){if(typeof e=="function")e();else{var r=e.element,c=e.prop,p=e.value;r.style[c]=p}}),O.splice(0,O.length),s()})};rt();var $=function(e,r){O.push({element:e,prop:"transitionDuration",value:r})},X=function(e,r){O.push({element:e,prop:"transitionTimingFunction",value:r})},w=function(e,r){O.push({element:e,prop:"transform",value:r})},D=function(e,r){O.push({element:e,prop:"opacity",value:r})},it=function(e,r){O.push({element:e,prop:"transformOrigin",value:r})},L=function(e,r,c,p){return e.addEventListener(r,c,p)},T=function(e,r,c,p){return e.removeEventListener(r,c,p)},st=function(){var e;l=P(a,".atropos-shadow"),l||(l=document.createElement("span"),l.classList.add("atropos-shadow"),e=!0),w(l,"translate3d(0,0,-"+t.shadowOffset+"px) scale("+t.shadowScale+")"),e&&y.appendChild(l)},ut=function(){var e;i=P(a,".atropos-highlight"),i||(i=document.createElement("span"),i.classList.add("atropos-highlight"),e=!0),w(i,"translate3d(0,0,0)"),e&&N.appendChild(i)},Z=function(e){var r=e.rotateXPercentage,c=r===void 0?0:r,p=e.rotateYPercentage,d=p===void 0?0:p,h=e.duration,E=e.opacityOnly,S=e.easeOut,C=function(g){if(g.dataset.atroposOpacity&&typeof g.dataset.atroposOpacity=="string")return g.dataset.atroposOpacity.split(";").map(function(Y){return parseFloat(Y)})};It(a,"[data-atropos-offset], [data-atropos-opacity]").forEach(function(m){$(m,h),X(m,S?"ease-out":"");var g=C(m);if(c===0&&d===0)E||w(m,"translate3d(0, 0, 0)"),g&&D(m,g[0]);else{var Y=parseFloat(m.dataset.atroposOffset)/100;if(!Number.isNaN(Y)&&!E&&w(m,"translate3d("+-d*-Y+"%, "+c*-Y+"%, 0)"),g){var j=g[0],H=g[1],Q=Math.max(Math.abs(c),Math.abs(d));D(m,j+(H-j)*Q/100)}}})},U=function(e,r){var c=a!==n;if(M||(M=a.getBoundingClientRect()),c&&!x&&(x=n.getBoundingClientRect()),typeof e>"u"&&typeof r>"u"){var p=c?x:M;e=p.left+p.width/2,r=p.top+p.height/2}var d=0,h=0,E=M,S=E.top,C=E.left,m=E.width,g=E.height,Y;if(c){var q=x,et=q.top,at=q.left,dt=q.width,vt=q.height,ht=C-at,mt=S-et,gt=m/2+ht,yt=g/2+mt,Mt=e-at,Ot=r-et;h=t.rotateYMax*(Mt-gt)/(dt-m/2)*-1,d=t.rotateXMax*(Ot-yt)/(vt-g/2),Y=e-C+"px "+(r-S)+"px"}else{var j=m/2,H=g/2,Q=e-C,pt=r-S;h=t.rotateYMax*(Q-j)/(m/2)*-1,d=t.rotateXMax*(pt-H)/(g/2)}d=Math.min(Math.max(-d,-t.rotateXMax),t.rotateXMax),t.rotateXInvert&&(d=-d),h=Math.min(Math.max(-h,-t.rotateYMax),t.rotateYMax),t.rotateYInvert&&(h=-h);var I=d/t.rotateXMax*100,B=h/t.rotateYMax*100,wt=(c?B/100*t.stretchX:0)*(t.rotateYInvert?-1:1),_t=(c?I/100*t.stretchY:0)*(t.rotateXInvert?-1:1),xt=c?Math.max(Math.abs(I),Math.abs(B))/100*t.stretchZ:0;w(y,"translate3d("+wt+"%, "+-_t+"%, "+-xt+"px) rotateX("+d+"deg) rotateY("+h+"deg)"),Y&&t.commonOrigin&&it(y,Y),i&&($(i,t.duration+"ms"),X(i,"ease-out"),w(i,"translate3d("+-B*.25+"%, "+I*.25+"%, 0)"),D(i,Math.max(Math.abs(I),Math.abs(B))/100)),Z({rotateXPercentage:I,rotateYPercentage:B,duration:t.duration+"ms",easeOut:!0}),typeof t.onRotate=="function"&&t.onRotate(d,h)},G=function(){O.push(function(){return a.classList.add("atropos-active")}),$(y,t.duration+"ms"),X(y,"ease-out"),w(_,"translate3d(0,0, "+t.activeOffset+"px)"),$(_,t.duration+"ms"),X(_,"ease-out"),l&&($(l,t.duration+"ms"),X(l,"ease-out")),f.isActive=!0},F=function(e){if(v=void 0,!(e.type==="pointerdown"&&e.pointerType==="mouse")&&!(e.type==="pointerenter"&&e.pointerType!=="mouse")){if(e.type==="pointerdown"&&e.preventDefault(),b=e.clientX,J=e.clientY,t.alwaysActive){M=void 0,x=void 0;return}G(),typeof t.onEnter=="function"&&t.onEnter()}},W=function(e){v===!1&&e.cancelable&&e.preventDefault()},k=function(e){if(!(!t.rotate||!f.isActive)){if(e.pointerType!=="mouse"){if(!t.rotateTouch)return;e.preventDefault()}var r=e.clientX,c=e.clientY,p=r-b,d=c-J;if(typeof t.rotateTouch=="string"&&(p!==0||d!==0)&&typeof v>"u"){if(p*p+d*d>=25){var h=Math.atan2(Math.abs(d),Math.abs(p))*180/Math.PI;v=t.rotateTouch==="scroll-y"?h>45:90-h>45}v===!1&&(a.classList.add("atropos-rotate-touch"),e.cancelable&&e.preventDefault())}e.pointerType!=="mouse"&&v||U(r,c)}},A=function(e){if(M=void 0,x=void 0,!!f.isActive&&!(e&&e.type==="pointerup"&&e.pointerType==="mouse")&&!(e&&e.type==="pointerleave"&&e.pointerType!=="mouse")){if(typeof t.rotateTouch=="string"&&v&&a.classList.remove("atropos-rotate-touch"),t.alwaysActive){U(),typeof t.onRotate=="function"&&t.onRotate(0,0),typeof t.onLeave=="function"&&t.onLeave();return}O.push(function(){return a.classList.remove("atropos-active")}),$(_,t.duration+"ms"),X(_,""),w(_,"translate3d(0,0, "+0+"px)"),l&&($(l,t.duration+"ms"),X(l,"")),i&&($(i,t.duration+"ms"),X(i,""),w(i,"translate3d(0, 0, 0)"),D(i,0)),$(y,t.duration+"ms"),X(y,""),w(y,"translate3d(0,0,0) rotateX(0deg) rotateY(0deg)"),Z({duration:t.duration+"ms"}),f.isActive=!1,typeof t.onRotate=="function"&&t.onRotate(0,0),typeof t.onLeave=="function"&&t.onLeave()}},tt=function(e){var r=e.target;!n.contains(r)&&r!==n&&f.isActive&&A()},ft=function(){typeof a=="string"&&(a=P(document,a)),a&&(a.__atropos__||(typeof n<"u"?typeof n=="string"&&(n=P(document,n)):n=a,Object.assign(f,{el:a}),y=P(a,".atropos-rotate"),_=P(a,".atropos-scale"),N=P(a,".atropos-inner"),a.__atropos__=f))},ct=function(){ft(),!(!a||!n)&&(t.shadow&&st(),t.highlight&&ut(),t.rotateTouch&&(typeof t.rotateTouch=="string"?a.classList.add("atropos-rotate-touch-"+t.rotateTouch):a.classList.add("atropos-rotate-touch")),P(a,"[data-atropos-opacity]")&&Z({opacityOnly:!0}),L(document,"click",tt),L(n,"pointerdown",F),L(n,"pointerenter",F),L(n,"pointermove",k),L(n,"touchmove",W),L(n,"pointerleave",A),L(n,"pointerup",A),L(n,"lostpointercapture",A),t.alwaysActive&&(G(),U()))},lt=function(){f.destroyed=!0,cancelAnimationFrame(K),T(document,"click",tt),T(n,"pointerdown",F),T(n,"pointerenter",F),T(n,"pointermove",k),T(n,"touchmove",W),T(n,"pointerleave",A),T(n,"pointerup",A),T(n,"lostpointercapture",A),delete a.__atropos__};return f.destroy=lt,ct(),f}function z(){return z=Object.assign||function(u){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(u[n]=a[n])}return u},z.apply(this,arguments)}var Dt={props:{component:{type:String,default:"div"},innerClass:String,scaleClass:String,rotateClass:String,eventsEl:{type:[String,Object],default:void 0},alwaysActive:{type:Boolean,default:!1},activeOffset:{type:Number,default:void 0},shadowOffset:{type:Number,default:void 0},shadowScale:{type:Number,default:void 0},duration:{type:Number,default:void 0},rotate:{type:Boolean,default:void 0},rotateTouch:{type:Boolean,default:void 0},rotateXMax:{type:Number,default:void 0},rotateYMax:{type:Number,default:void 0},rotateXInvert:{type:Boolean,default:void 0},rotateYInvert:{type:Boolean,default:void 0},stretchX:{type:Number,default:void 0},stretchY:{type:Number,default:void 0},stretchZ:{type:Number,default:void 0},commonOrigin:{type:Boolean,default:!0},shadow:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},emits:["enter","leave","rotate"],setup:function(o,a){var n=nt(null),f=nt(null),t=a.slots,y=a.emit,_=function(){f.value=Nt(z({el:n.value},o,{onEnter:function(){y("enter")},onLeave:function(){y("leave")},onRotate:function(){for(var i=arguments.length,v=new Array(i),b=0;b<i;b++)v[b]=arguments[b];y.apply(void 0,["rotate"].concat(v))}}))},N=function(){f.value&&(f.value.destroy(),f.value=null)};bt(function(){_()}),$t(function(){N()});var M=function(){for(var l=arguments.length,i=new Array(l),v=0;v<l;v++)i[v]=arguments[v];return i.filter(function(b){return!!b}).join(" ")};return function(){return R(o.component,{class:"atropos",ref:n},[R("span",{class:M("atropos-scale",o.scaleClass)},[R("span",{class:M("atropos-rotate",o.rotateClass)},[R("span",{class:M("atropos-inner",o.innerClass)},[t.default&&t.default(),o.highlight&&R("span",{class:"atropos-highlight"})]),t.rotate&&t.rotate(),o.shadow&&R("span",{class:"atropos-shadow"})]),t.scale&&t.scale()]),t.root&&t.root()])}}};const Ft=Dt,jt=u=>(Et("data-v-caa589b8"),u=u(),Rt(),u),qt={class:"dynamic"},Zt=jt(()=>ot("div",null,[ot("img",{src:Ct,alt:""})],-1)),Ut=Xt({__name:"dynamic",setup(u){const o=()=>console.log("Enter"),a=()=>console.log("Leave"),n=(f,t)=>console.log("Rotate",f,t);return(f,t)=>(Yt(),Lt("div",qt,[Tt(At(Ft),{"active-offset":40,"shadow-scale":1.05,onEnter:o,onLeave:a,onRotate:n,class:"dy_atropos"},{default:Pt(()=>[Zt]),_:1},8,["shadow-scale"])]))}});const Qt=St(Ut,[["__scopeId","data-v-caa589b8"]]);export{Qt as default};
